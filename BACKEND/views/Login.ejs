<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/css/Login.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
</head>
<body>

    <!-- Flash Message Display -->
    <% if (messages.error) { %>
      <div class="flash-error">
        <%= messages.error %>
      </div>
    <% } %>

    <% if (messages.success) { %>
      <div class="flash-success">
        <%= messages.success %>
      </div>
    <% } %>

    <form action="/submit-login" method="POST">
      <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
      </div>
      <div>
        <label for="password">Password:</label>
        <div class="password-input">
          <input type="password" id="password" name="password" required />
          <i id="password-eye" class="fa-solid fa-eye"></i>
        </div>
      </div>
      <button type="submit">Login</button>

      <!-- Login Link -->
      <p>Don't have an account? <a href="/reg">Register</a></p>
    </form>

    <script>
      // Flash message fade-out after a few seconds
      setTimeout(() => {
        const flashErrors = document.querySelector('.flash-error');
        const flashSuccess = document.querySelector('.flash-success');
        if (flashErrors) {
          flashErrors.style.display = 'none';
        }
        if (flashSuccess) {
          flashSuccess.style.display = 'none';
        }
      }, 3000); // Set the timeout duration to 3 seconds


      // Show/hide password functionality
      const passwordInput = document.getElementById('password');
      const passwordEye = document.getElementById('password-eye');

      passwordEye.addEventListener('click', () => {
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          passwordEye.classList.remove('fa-eye');
          passwordEye.classList.add('fa-eye-slash');
        } else {
          passwordInput.type = 'password';
          passwordEye.classList.remove('fa-eye-slash');
          passwordEye.classList.add('fa-eye');
        }
      });
    </script>

</body>
</html>